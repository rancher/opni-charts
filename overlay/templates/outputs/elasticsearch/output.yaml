{{- if .Values.elasticsearch.enabled }}
apiVersion: logging.banzaicloud.io/v1beta1
kind: ClusterOutput
metadata:
  name: {{ .Release.Name }}-elasticsearch
spec:
  elasticsearch:
    host: {{ .Values.elasticsearch.host }}
    port: {{ .Values.elasticsearch.port }}
    scheme: {{ .Values.elasticsearch.scheme }}
    index_name: {{ .Values.elasticsearch.index_name }}
  {{- if .Values.elasticsearch.user }}
user: {{ .Values.elasticsearch.user }}
  {{- end}}
{{- if .Values.elasticsearch.password.secret_name }}
password:
  valueFrom:
    secretKeyRef:
      name: {{ .Values.elasticsearch.password.secret_name }}
      key: {{ .Values.elasticsearch.password.key }}
{{- end}}
{{- if .Values.elasticsearch.client_cert.secret_name }}
client_cert:
  valueFrom:
    secretKeyRef:
      name: {{ .Values.elasticsearch.client_cert.secret_name }}
      key: {{ .Values.elasticsearch.client_cert.key }}
{{- end}}
{{- if .Values.elasticsearch.client_key.secret_name }}
client_key:
  valueFrom:
    secretKeyRef:
      name: {{ .Values.elasticsearch.client_key.secret_name }}
      key: {{ .Values.elasticsearch.client_key.key }}
{{- end}}
{{- if .Values.elasticsearch.client_key_pass.secret_name }}
client_key_pass:
  valueFrom:
    secretKeyRef:
      name: {{ .Values.elasticsearch.client_key_pass.secret_name }}
      key: {{ .Values.elasticsearch.client_key_pass.key }}
{{- end}}
{{- end }}
